<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Ads Manager Pro - Reino do Êxtase</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-database-compat.js"></script>
</head>
<body>
    <div class="app-container">
        <div id="sidebar-overlay" class="overlay"></div>

        <aside class="sidebar" id="sidebar">
            <div class="sidebar-header">
                <div class="brand">
                    <i class="fas fa-megaphone"></i>
                    <span>Ads Pro</span>
                </div>
                <div class="bot-status">
                    <span id="bot-online-dot" class="dot"></span>
                    <span id="bot-status-text">Offline</span>
                </div>
                <button id="close-sidebar" class="mobile-only close-btn">&times;</button>
            </div>
            
            <div class="search-box">
                <i class="fas fa-search"></i>
                <input type="text" id="search-ann" placeholder="Buscar anúncio...">
            </div>

            <div id="announcements-list" class="ann-list">
                <!-- Anúncios renderizados dinamicamente -->
            </div>

            <div class="announcements-stats">
                <div class="stat-item">
                    <span class="stat-label">Total</span>
                    <span id="stat-total" class="stat-value">0</span>
                </div>
                <div class="stat-item">
                    <span class="stat-label">Ativos</span>
                    <span id="stat-active" class="stat-value active">0</span>
                </div>
                <div class="stat-item">
                    <span class="stat-label">Expirados</span>
                    <span id="stat-expired" class="stat-value expired">0</span>
                </div>
            </div>

            <div class="sidebar-footer">
                <button id="new-announcement-btn" class="btn-primary-block">
                    <i class="fas fa-plus"></i> Novo Anúncio
                </button>
            </div>
        </aside>

        <main class="main-content">
            <header class="top-bar">
                <div class="left-actions">
                    <button id="open-sidebar" class="mobile-only menu-trigger" aria-label="Abrir Menu">
                        <i class="fas fa-bars"></i>
                    </button>
                    <h1 id="current-ann-title">Novo Anúncio</h1>
                </div>
                <div class="right-actions">
                    <div id="active-admins" class="active-admins"></div>
                    <span id="save-status" class="status-indicator">Pronto</span>
                    <button id="delete-btn" class="btn-icon-danger" title="Excluir"><i class="fas fa-trash-alt"></i></button>
                    <button id="send-now-btn" class="btn-primary" title="Enviar Agora">
                        <i class="fas fa-paper-plane"></i>
                    </button>
                    <button id="save-btn" class="btn-success">
                        <i class="fas fa-cloud-upload-alt"></i> <span class="pc-only">Salvar</span>
                    </button>
                </div>
            </header>

            <div class="editor-layout">
                <div class="config-pane">
                    <!-- Seção: Informações Básicas -->
                    <div class="section-card">
                        <div class="section-title">
                            <span><i class="fas fa-info-circle"></i> Informações</span>
                            <label class="switch">
                                <input type="checkbox" id="ann-active" checked>
                                <span class="slider round"></span>
                            </label>
                        </div>
                        <div class="form-group">
                            <label>Título do Anúncio</label>
                            <input type="text" id="ann-title" class="custom-input" placeholder="Nome da campanha">
                        </div>
                        <div class="form-row">
                            <div class="form-group">
                                <label>Data de Início</label>
                                <input type="datetime-local" id="ann-start-date" class="custom-input">
                            </div>
                            <div class="form-group">
                                <label>Data de Vencimento</label>
                                <input type="datetime-local" id="ann-expiry-date" class="custom-input">
                            </div>
                        </div>
                        <div id="expiry-warning" class="warning-box" style="display:none;">
                            <i class="fas fa-clock"></i>
                            <span>Expira em: <strong id="expiry-countdown">--</strong></span>
                        </div>
                    </div>

                    <!-- Seção: Agendamento -->
                    <div class="section-card">
                        <div class="section-title"><i class="fas fa-calendar"></i> Agendamento</div>
                        <div class="form-group">
                            <label>Canal de Destino</label>
                            <select id="ann-channel" class="custom-select"></select>
                        </div>
                        <div class="form-group">
                            <label>Modo de Envio</label>
                            <div class="mode-selector">
                                <button class="mode-btn active" data-mode="smart">
                                    <i class="fas fa-wand-sparkles"></i>
                                    <span>Smart</span>
                                </button>
                                <button class="mode-btn" data-mode="interval">
                                    <i class="fas fa-repeat"></i>
                                    <span>Intervalo</span>
                                </button>
                                <button class="mode-btn" data-mode="fixed">
                                    <i class="fas fa-clock"></i>
                                    <span>Fixo</span>
                                </button>
                            </div>
                            <input type="hidden" id="ann-schedule-type" value="smart">
                        </div>

                        <div id="smart-info" class="info-box">
                            <i class="fas fa-info-circle"></i>
                            O bot enviará 3 vezes ao dia em horários aleatórios entre 08:00 e 22:00.
                        </div>

                        <div id="interval-config" style="display:none;">
                            <div class="form-row">
                                <div class="form-group">
                                    <label>Horas</label>
                                    <input type="number" id="ann-interval-hours" value="1" min="0" class="custom-input">
                                </div>
                                <div class="form-group">
                                    <label>Minutos</label>
                                    <input type="number" id="ann-interval-minutes" value="0" min="0" max="59" class="custom-input">
                                </div>
                            </div>
                        </div>

                        <div id="fixed-config" class="form-group" style="display:none;">
                            <label>Horários (ex: 14:00, 19:30)</label>
                            <input type="text" id="ann-fixed-times" placeholder="10:00, 15:00, 22:00" class="custom-input">
                        </div>
                    </div>

                    <!-- Seção: Variáveis de Template -->
                    <div class="section-card">
                        <div class="section-title"><i class="fas fa-code"></i> Variáveis de Template</div>
                        <div class="template-vars-grid">
                            <button class="template-var-btn" onclick="insertTemplate('{server.name}')">Servidor</button>
                            <button class="template-var-btn" onclick="insertTemplate('{server.icon}')">Icon Servidor</button>
                            <button class="template-var-btn" onclick="insertTemplate('{server.members}')">Membros</button>
                            <button class="template-var-btn" onclick="insertTemplate('{server.created_at}')">Criado em</button>
                            <button class="template-var-btn" onclick="insertTemplate('{user.name}')">Seu Nome</button>
                            <button class="template-var-btn" onclick="insertTemplate('{user.avatar}')">Seu Avatar</button>
                            <button class="template-var-btn" onclick="insertTemplate('{campaign.name}')">Nome Campanha</button>
                            <button class="template-var-btn" onclick="insertTemplate('{timestamp}')">Data/Hora</button>
                        </div>
                    </div>

                    <!-- Seção: Conteúdo -->
                    <div class="section-card">
                        <div class="section-title"><i class="fas fa-pen-to-square"></i> Conteúdo</div>
                        <div class="form-group">
                            <label>Título do Embed</label>
                            <input type="text" id="embed-title" class="custom-input">
                        </div>
                        <div class="form-group">
                            <label>Descrição</label>
                            <div class="editor-container">
                                <div class="toolbar">
                                    <button onclick="format('bold')" title="Negrito"><i class="fas fa-bold"></i></button>
                                    <button onclick="format('italic')" title="Itálico"><i class="fas fa-italic"></i></button>
                                    <button onclick="format('underline')" title="Sublinhado"><i class="fas fa-underline"></i></button>
                                    <div class="emoji-picker-container">
                                        <button type="button" id="emoji-btn" title="Emojis"><i class="far fa-smile"></i></button>
                                        <div id="emoji-picker" class="emoji-picker" style="display:none;">
                                            <div class="emoji-picker-header">
                                                <span>Emojis do Servidor</span>
                                                <div class="emoji-filters">
                                                    <button class="emoji-filter active" data-filter="all">Todos</button>
                                                    <button class="emoji-filter" data-filter="static">Estáticos</button>
                                                    <button class="emoji-filter" data-filter="animated">Animados</button>
                                                </div>
                                            </div>
                                            <div id="emoji-picker-grid" class="emoji-picker-grid"></div>
                                        </div>
                                    </div>
                                </div>
                                <textarea id="embed-desc" rows="6" class="custom-textarea"></textarea>
                            </div>
                        </div>
                        <div class="form-row">
                            <div class="form-group">
                                <label>Cor Lateral</label>
                                <input type="color" id="embed-color" value="#5865f2" class="color-input">
                            </div>
                            <div class="form-group">
                                <label>Thumbnail (URL)</label>
                                <input type="text" id="embed-thumb" class="custom-input">
                            </div>
                        </div>
                        <div class="form-group">
                            <label>Banner Principal (URL)</label>
                            <input type="text" id="embed-image" class="custom-input">
                        </div>
                        <div class="form-row">
                            <div class="form-group">
                                <label>Rodapé</label>
                                <input type="text" id="embed-footer-text" class="custom-input">
                            </div>
                            <div class="form-group">
                                <label>Ícone Rodapé</label>
                                <input type="text" id="embed-footer-icon" class="custom-input">
                            </div>
                        </div>
                    </div>

                    <!-- Seção: Campos Customizáveis -->
                    <div class="section-card">
                        <div class="section-title">
                            <span><i class="fas fa-layer-group"></i> Campos Customizáveis</span>
                            <button id="add-field-btn" class="btn-small" title="Adicionar Campo"><i class="fas fa-plus"></i></button>
                        </div>
                        <div id="fields-container" class="fields-container">
                            <!-- Campos adicionados dinamicamente -->
                        </div>
                    </div>

                    <!-- Seção: Botões -->
                    <div class="section-card">
                        <div class="section-title">
                            <span><i class="fas fa-square-check"></i> Botões</span>
                            <button id="add-button-btn" class="btn-small" title="Adicionar Botão"><i class="fas fa-plus"></i></button>
                        </div>
                        <div id="buttons-container" class="buttons-container">
                            <!-- Botões adicionados dinamicamente -->
                        </div>
                    </div>

                    <!-- Seção: Camuflagem -->
                    <div class="section-card">
                        <div class="section-title">
                            <span><i class="fas fa-user-ninja"></i> Camuflagem</span>
                            <label class="switch">
                                <input type="checkbox" id="cam-mode">
                                <span class="slider round"></span>
                            </label>
                        </div>
                        <div id="cam-config" class="cam-body" style="display:none;">
                            <div class="form-group">
                                <label>ID do Usuário (Auto-Busca)</label>
                                <div class="input-with-action">
                                    <input type="text" id="cam-user-id" placeholder="ID do Discord..." class="custom-input">
                                    <button id="fetch-user-btn" class="btn-small"><i class="fas fa-sync"></i></button>
                                </div>
                            </div>
                            <div class="form-row">
                                <div class="form-group">
                                    <label>Nome Manual</label>
                                    <input type="text" id="cam-name" class="custom-input">
                                </div>
                                <div class="form-group">
                                    <label>Avatar URL</label>
                                    <input type="text" id="cam-avatar" class="custom-input">
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Seção: Logs Recentes -->
                    <div class="section-card">
                        <div class="section-title"><i class="fas fa-list-check"></i> Logs de Envio</div>
                        <div id="ann-logs" class="logs-container">
                            <div style="color: var(--text-muted); text-align: center; padding: 10px;">Selecione um anúncio para ver os logs.</div>
                        </div>
                    </div>
                </div>

                <div class="preview-pane">
                    <div class="sticky-preview">
                        <div class="preview-header">Preview Discord</div>
                        <div class="discord-preview">
                            <div class="d-msg">
                                <img id="p-avatar" src="https://cdn.discordapp.com/embed/avatars/0.png" class="d-avatar">
                                <div class="d-body">
                                    <div class="d-user">
                                        <span id="p-name" class="d-username">Bot de Anúncios</span>
                                        <span class="d-tag">BOT</span>
                                        <span class="d-date">Hoje às 12:00</span>
                                    </div>
                                    <div id="p-embed" class="d-embed">
                                        <div class="d-embed-wrapper">
                                            <div id="p-color" class="d-color"></div>
                                            <div class="d-content">
                                                <div class="d-text">
                                                    <div id="p-title" class="d-title"></div>
                                                    <div id="p-desc" class="d-desc"></div>
                                                    <div id="p-fields" class="d-fields"></div>
                                                </div>
                                                <img id="p-thumb" class="d-thumb">
                                            </div>
                                            <img id="p-image" class="d-image">
                                            <div id="p-buttons" class="d-buttons"></div>
                                            <div class="d-footer">
                                                <img id="p-footer-icon" class="d-f-icon">
                                                <span id="p-footer-text"></span>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <script src="script.js"></script>
</body>
</html>
